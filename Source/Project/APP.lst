C51 COMPILER V9.00   APP                                                                   05/12/2015 20:18:28 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE APP
OBJECT MODULE PLACED IN .\mess\APP.obj
COMPILER INVOKED BY: D:\software install\NEW\keil 4\C51\BIN\C51.EXE ..\user\APP.c BROWSE INCDIR(..\user;..\ZOS-I\source\
                    -inc;..\ZOS-I\source\CPU) DEBUG OBJECTEXTEND PRINT(.\APP.lst) OBJECT(.\mess\APP.obj)

line level    source

   1          /*$T indentinput.cpp GC 1.140 03/06/15 16:03:12 */
   2          
   3          
   4          /*$6
   5           +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
             -++++++++++++++
   6           +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
             -++++++++++++++
   7           */
   8          
   9          
  10          #include <APP_Cfg.h>
  11          #include <OS.h>
  12          OS_CPU_XUCHAR   Task_0_Stack[Task_0_StackSize] = { 0 }; /* 任务0堆栈 */
  13          OS_CPU_XUCHAR   Task_1_Stack[Task_1_StackSize] = { 0 };
  14          OS_CPU_XUCHAR   Task_2_Stack[Task_2_StackSize] = { 0 };
  15          OS_CPU_XUCHAR   Task_3_Stack[Task_3_StackSize] = { 0 };
  16          
  17          sbit Test_1 = P3^6;
  18          sbit Test_2 = P4^1;
  19          sbit Test_3 = P4^3;
  20          sbit Test_4 = P4^2;
  21          
  22          #define TurnDownAll()   {Test_1 = 0;Test_2 = 0;Test_3 = 0;Test_4 = 0;}
  23          
  24          /*
  25           =========================================================================================================
             -==============
  26           =========================================================================================================
             -==============
  27           */
  28          void Task_0(void)
  29          {
  30   1              /*~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
  31   1              OS_CPU_XUINT    Counter = 0x00;
  32   1              /*~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
  33   1      
  34   1              while(1)
  35   1              {
  36   2                      OS_Delay_nTick(5);
  37   2                      Test_1 = ~Test_1;
  38   2              }
  39   1      }
  40          
  41          /*
  42           =========================================================================================================
             -==============
  43           =========================================================================================================
             -==============
  44           */
  45          void Task_1(void)
  46          {
  47   1              /*~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
  48   1              OS_CPU_XUINT    Counter = 0x00;
C51 COMPILER V9.00   APP                                                                   05/12/2015 20:18:28 PAGE 2   

  49   1              /*~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
  50   1      
  51   1              while(1)
  52   1              {
  53   2                      OS_Delay_nTick(10);
  54   2                      Test_2 = ~Test_2;
  55   2              }
  56   1      }
  57          
  58          /*
  59           =========================================================================================================
             -==============
  60           =========================================================================================================
             -==============
  61           */
  62          void Task_2(void)
  63          {
  64   1              /*~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
  65   1              OS_CPU_XUINT    Counter = 0x00;
  66   1              /*~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
  67   1      
  68   1              while(1)
  69   1              {
  70   2                      OS_Delay_nTick(15);
  71   2                      Test_3 = ~Test_3;
  72   2              }
  73   1      }
  74          
  75          /*
  76           =========================================================================================================
             -==============
  77           =========================================================================================================
             -==============
  78           */
  79          void Task_3(void)
  80          {
  81   1              /*~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
  82   1              OS_CPU_XUINT    Counter = 0x00;
  83   1              /*~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
  84   1      
  85   1              while(1)
  86   1              {
  87   2                      OS_Delay_nTick(20);
  88   2                      Test_4 = ~Test_4;
  89   2              }
  90   1      }
  91          
  92          /*
  93           =========================================================================================================
             -==============
  94              定时器1初始化
  95           =========================================================================================================
             -==============
  96           */
  97          void Task_Timer1(void)
  98          {
  99   1              TMOD &= 0x0F;   /* 设置定时器模式 */
 100   1              TMOD |= 0x10;   /* 设置定时器模式 */
 101   1              TL1 = 0xF0;             /* 设置定时初值 */
 102   1              TH1 = 0xD8;             /* 设置定时初值 */
 103   1              TF1 = 0;                /* 清除TF1标志 */
 104   1              TR1 = 1;                /* 定时器1开始计时 */
C51 COMPILER V9.00   APP                                                                   05/12/2015 20:18:28 PAGE 3   

 105   1              ET1 = 1;
 106   1              ENABLE_ALL_INT();
 107   1      }
 108          
 109          /*
 110           =========================================================================================================
             -==============
 111           =========================================================================================================
             -==============
 112           */
 113          void TimerTask_1(void)
 114          {
 115   1              /*~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
 116   1              OS_CPU_XUINT    Counter = 0x00;
 117   1              /*~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
 118   1      
 119   1              Counter += 100;
 120   1      }
 121          
 122          /*
 123           =========================================================================================================
             -==============
 124           =========================================================================================================
             -==============
 125           */
 126          void TimerTask_2(void)
 127          {
 128   1              /*~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
 129   1              OS_CPU_XUINT    Counter = 0x00;
 130   1              /*~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
 131   1      
 132   1              Counter += 100;
 133   1      }
 134          
 135          /*
 136           =========================================================================================================
             -==============
 137           =========================================================================================================
             -==============
 138           */
 139          void main(void)
 140          {
 141   1              TurnDownAll();
 142   1              OS_Init();
 143   1              TaskCreate((OS_CPU_INT) Task_0, Task_0_Stack, Task_0_StackSize, Task_0_Prio);
 144   1              TaskCreate((OS_CPU_INT) Task_1, Task_1_Stack, Task_1_StackSize, Task_1_Prio);
 145   1              TaskCreate((OS_CPU_INT) Task_2, Task_2_Stack, Task_2_StackSize, Task_2_Prio);
 146   1              TaskCreate((OS_CPU_INT) Task_3, Task_3_Stack, Task_3_StackSize, Task_3_Prio);
 147   1              Task_Timer1();
 148   1              OS_TIMER_ADD((OS_CPU_INT) TimerTask_1, 10, OS_TIMER_TYPE_PERIOD, 100);
 149   1              OS_TIMER_ADD((OS_CPU_INT) TimerTask_2, 10, OS_TIMER_TYPE_nTimes, 4);
 150   1              OS_Start();
 151   1      
 152   1              while(1);
 153   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    246    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =     40      12
   PDATA SIZE       =   ----    ----
C51 COMPILER V9.00   APP                                                                   05/12/2015 20:18:28 PAGE 4   

   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
